#!/bin/bash

WINDOW_PATTERN="whatsapp-webapp"
LAUNCH_COMMAND="/home/str/.local/share/wa-notifier/bin/launch-whatsapp-web"

# Look for window by class OR title
WINDOW_ADDRESS=$(hyprctl clients -j | jq -r --arg p "$WINDOW_PATTERN" '.[] | select((.class|test("\\b"+$p+"\\b";"i")) or (.title|test("\\b"+$p+"\\b";"i"))) | .address' | head -n1)

if [[ -n $WINDOW_ADDRESS ]]; then
    hyprctl dispatch focuswindow "address:$WINDOW_ADDRESS"
else
    eval exec setsid $LAUNCH_COMMAND
fi
